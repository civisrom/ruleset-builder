# üìã –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —à–∞–±–ª–æ–Ω–æ–≤

## –ß—Ç–æ —Ç–∞–∫–æ–µ —à–∞–±–ª–æ–Ω—ã?

–®–∞–±–ª–æ–Ω—ã ‚Äî —ç—Ç–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### 1. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã
–ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –¥–æ–º–µ–Ω—ã –∏ —Ç—Ä–µ–∫–µ—Ä—ã:
- `.ad.com`, `.ads.com`
- `.doubleclick.net`
- –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `analytics`, `telemetry`, `tracking`

### 2. –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã
–í—Å–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã:
- `.ru`, `.—Ä—Ñ`, `.su`

### 3. –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
–û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- Facebook, Twitter, Instagram
- –í–∫–ª—é—á–∞—è –ø–æ–¥–¥–æ–º–µ–Ω—ã (`.facebook.com`, etc.)

### 4. –°—Ç—Ä–∏–º–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å—ã
–í–∏–¥–µ–æ –∏ —Å—Ç—Ä–∏–º–∏–Ω–≥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- YouTube, Netflix, Twitch

### 5. –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
–ß–∞—Å—Ç–Ω—ã–µ IP –¥–∏–∞–ø–∞–∑–æ–Ω—ã:
- `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16`
- Loopback: `127.0.0.1/8`

---

## –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤

### –ß–µ—Ä–µ–∑ GUI

1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∞–≤–∏–ª–∞–º–∏
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–®–∞–±–ª–æ–Ω—ã"**
3. –ù–∞–∂–º–∏—Ç–µ **"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ —à–∞–±–ª–æ–Ω"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (`.json` —Ñ–∞–π–ª)

### –§–æ—Ä–º–∞—Ç JSON —à–∞–±–ª–æ–Ω–∞

```json
{
  "domain": [
    "example.com",
    "test.com"
  ],
  "domain_suffix": [
    ".ru",
    ".com"
  ],
  "domain_keyword": [
    "ads",
    "tracker"
  ],
  "ip_cidr": [
    "10.0.0.0/8",
    "192.168.0.0/16"
  ]
}
```

### –ü—Ä–∏–º–µ—Ä: –®–∞–±–ª–æ–Ω –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤

```json
{
  "domain_suffix": [
    ".cn",
    ".com.cn",
    ".net.cn",
    ".org.cn"
  ],
  "domain_keyword": [
    "baidu",
    "taobao",
    "alibaba"
  ]
}
```

### –ü—Ä–∏–º–µ—Ä: –®–∞–±–ª–æ–Ω –¥–ª—è VPN –æ–±—Ö–æ–¥–∞

```json
{
  "domain": [
    "telegram.org",
    "twitter.com",
    "facebook.com"
  ],
  "domain_suffix": [
    ".t.me",
    ".telegram.org",
    ".twitter.com",
    ".facebook.com",
    ".instagram.com"
  ],
  "ip_cidr": [
    "149.154.160.0/20",
    "91.108.56.0/22"
  ]
}
```

---

## –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤

### –ß–µ—Ä–µ–∑ GUI
1. –í–∫–ª–∞–¥–∫–∞ **"–®–∞–±–ª–æ–Ω—ã"**
2. –ù–∞–∂–º–∏—Ç–µ **"üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω –∏–∑ —Ñ–∞–π–ª–∞"**
3. –í—ã–±–µ—Ä–∏—Ç–µ `.json` —Ñ–∞–π–ª

### –ß–µ—Ä–µ–∑ CLI
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

```bash
python ruleset_builder.py \
  -o my_rules \
  -f json \
  --domain domains.txt \
  --domain-suffix suffixes.txt \
  --ip-cidr ips.txt
```

---

## –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å –∫ –Ω–µ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤.

**–ü—Ä–∏–º–µ—Ä workflow:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —à–∞–±–ª–æ–Ω "–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã"
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤—Ä—É—á–Ω—É—é
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å IP –∞–¥—Ä–µ—Å–∞–º–∏
4. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏—Ç–æ–≥–æ–≤—ã–π ruleset

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤
–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π:
- `ads_blocking.json` ‚Äî —Ä–µ–∫–ª–∞–º–∞
- `social_media.json` ‚Äî —Å–æ—Ü. —Å–µ—Ç–∏
- `streaming.json` ‚Äî —Å—Ç—Ä–∏–º–∏–Ω–≥
- `china_bypass.json` ‚Äî –æ–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

### 2. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–ª–µ `_description` –≤ JSON:

```json
{
  "_description": "–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã –∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤ ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–æ 2024-01-15",
  "domain_suffix": [".ads.com"]
}
```

### 3. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ —à–∞–±–ª–æ–Ω—ã —Å –Ω–æ–≤—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GitHub Actions

### 4. –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ:
- `google_ads.json`
- `facebook_trackers.json`
- `yandex_metrics.json`

–ó–∞—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –∏—Ö –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## –ü—É–±–ª–∏–∫–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤

### –ù–∞ GitHub

1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `my-rulesets`
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
my-rulesets/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ ads_blocking.json
‚îÇ   ‚îú‚îÄ‚îÄ social_media.json
‚îÇ   ‚îî‚îÄ‚îÄ streaming.json
‚îî‚îÄ‚îÄ README.md
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Releases –¥–ª—è –≤–µ—Ä—Å–∏–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç README –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤:

```markdown
# –®–∞–±–ª–æ–Ω: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã

## –û–ø–∏—Å–∞–Ω–∏–µ
–ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –¥–æ–º–µ–Ω—ã –∏ —Ç—Ä–µ–∫–µ—Ä—ã.

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –î–æ–º–µ–Ω–æ–≤: 500+
- –°—É—Ñ—Ñ–∏–∫—Å–æ–≤: 50+
- –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2024-01-15

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –°–∫–∞—á–∞–π—Ç–µ `ads_blocking.json`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ Ruleset Builder
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ ruleset

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏
- EasyList
- AdGuard DNS
- Community contributions
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```yaml
name: Update Templates

on:
  schedule:
    - cron: '0 0 * * 0'  # –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Download latest ad domains
        run: |
          curl -o data/ads.txt https://example.com/adlist.txt
      
      - name: Generate template
        run: |
          python ruleset_builder.py \
            -o templates/ads_blocking \
            -f json \
            --domain data/ads.txt
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å
```json
{
  "domain_suffix": [
    ".company.com",
    ".internal"
  ],
  "ip_cidr": [
    "10.0.0.0/8"
  ],
  "network_type": "ethernet"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```json
{
  "package_name": [
    "com.company.app",
    "com.company.beta"
  ],
  "network_is_expensive": true
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–æ—É—Ç–µ—Ä –¥–ª—è –¥–æ–º–∞
```json
{
  "domain_keyword": [
    "ads",
    "tracking",
    "telemetry"
  ],
  "ip_cidr": [
    "192.168.1.0/24"
  ]
}
```

---

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–≥—É –ª–∏ —è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω–æ–≤?**
A: –î–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–≤—ã–π —à–∞–±–ª–æ–Ω, –∑–∞—Ç–µ–º –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ.

**Q: –ö–∞–∫ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —à–∞–±–ª–æ–Ω–æ–º?**
A: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∫ JSON –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ GitHub –∏–ª–∏ –ª—é–±–æ–π —Ñ–∞–π–ª–æ–æ–±–º–µ–Ω–Ω–∏–∫.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wildcards?**
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `domain_suffix` –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –∏–ª–∏ `domain_regex` –¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Sing-Box –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://sing-box.sagernet.org/)
- [Mihomo –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/MetaCubeX/mihomo)
- [EasyList ‚Äî —Å–ø–∏—Å–∫–∏ —Ä–µ–∫–ª–∞–º—ã](https://easylist.to/)
- [AdGuard DNS filter](https://adguard.com/en/adguard-dns/overview.html)

---

**–°–æ–≤–µ—Ç**: –ù–∞—á–Ω–∏—Ç–µ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã!
